<%# app/views/modals/show.js.erb %>

<%# First render the modal %>
$('#myModal').html("<%= j render :partial => @modal_partial, 
                                 locals: { :header_glyphicon => @header_glyphicon,
                                           :header_title => @header_title,
                                           :modal_id => @modal_id
                                         }
                    %>");

<%# Then render the specific dynamic form %>
<% if !@form_partial.nil? %>
    $('.modal-body').html("<%= j render :partial => @form_partial, 
                                        locals: { :object => @object } %>");
<% end %>

<%# Show the modal %>
$('<%= "#" + @modal_id %>').modal('show');

<%# Put a listener for submitting %>
$('#modal-submit').click(function() {
    $('<%= "#" + @modal_id %>').modal('hide');
});