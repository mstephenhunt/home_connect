<%# app/views/modals/show.js.erb %>

<%# This is used to dynamically render modals, the modal type and variables
    are passed from the modals#show action 
%>

<%# First render the modal %>
$('#myModal').html("<%= j render :partial => @modal_partial, 
                                 locals: { :header_glyphicon => @header_glyphicon,
                                           :header_title => @header_title,
                                           :modal_id => @modal_id
                                         }
                    %>");

<%# Then render the specific dynamic form %>
$('.modal-body').html("<%= j render :partial => @form_partial, 
                                    locals: { :object => @object,
                                              :form_data => @form_data
                                            } 
                       %>");

<%# Show the modal %>
$('<%= "#" + @modal_id %>').modal('show');

<%# Put a listener for submitting %>
$('#modal-submit').click(function() {
    $('<%= "#" + @modal_id %>').modal('hide');
});
